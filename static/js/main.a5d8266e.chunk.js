(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{177:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i,l,o=n(0),j=n.n(o),b=n(45),d=n.n(b),u=(n(177),n(21)),O=n(168),h=n(251),m=n(253),x=n(250),p=n(166),v=n(55),g=n(17),f=n(141),w=function(){return localStorage.getItem("id_token")},S=function(){var e=w();return!(!e||function(e){return Object(f.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}(e))},y=function(e){localStorage.setItem("id_token",e),window.location.assign("/Profile")},k=function(){localStorage.removeItem("id_token"),window.location.reload()},$=n(20),_=n(28),C=n(4),D=n(18),E=n(246),N=n(68),Y=n(252),A=Object(Y.a)(a||(a=Object(N.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),I=Object(Y.a)(c||(c=Object(N.a)(["\n  mutation addUser($email: String!, $password: String!) {\n    addUser(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),M=Object(Y.a)(r||(r=Object(N.a)(["\n  mutation addEvent($title: String!, $start: String!, $end: String!) {\n    addEvent(title: $title, start: $start, end: $end) {\n      _id\n      title\n      start\n      end\n    }\n  }\n"]))),P=n(9),q=function(e){var t=Object(o.useState)({email:"",password:""}),n=Object(D.a)(t,2),a=n[0],c=n[1],r=Object(E.a)(A),s=Object(D.a)(r,2),i=s[0],l=s[1],j=l.error,b=l.data,d=function(e){var t=e.target,n=t.name,r=t.value;c(Object(u.a)(Object(u.a)({},a),{},Object(C.a)({},n,r)))},O=function(){var e=Object(_.a)(Object($.a)().mark((function e(t){var n,r;return Object($.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(u.a)({},a)});case 5:n=e.sent,r=n.data,y(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsxs)("main",{children:[Object(P.jsx)("h4",{children:"Login"}),Object(P.jsxs)("div",{children:[b?Object(P.jsx)("p",{children:"Success! You have logged in!"}):Object(P.jsxs)("form",{onSubmit:O,children:[Object(P.jsx)("label",{for:"email",children:"Email"}),Object(P.jsx)("br",{}),Object(P.jsx)("input",{placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:d}),Object(P.jsx)("br",{}),Object(P.jsx)("label",{for:"password",children:"Password"}),Object(P.jsx)("br",{}),Object(P.jsx)("input",{placeholder:"******",name:"password",type:"password",value:a.password,onChange:d}),Object(P.jsx)("br",{}),Object(P.jsx)("button",{style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(P.jsx)("div",{children:j.message})]})]})},L=function(){var e=Object(o.useState)({email:"",password:""}),t=Object(D.a)(e,2),n=t[0],a=t[1],c=Object(E.a)(I),r=Object(D.a)(c,2),s=r[0],i=r[1],l=i.error,j=i.data,b=function(e){var t=e.target,c=t.name,r=t.value;a(Object(u.a)(Object(u.a)({},n),{},Object(C.a)({},c,r)))},d=function(){var e=Object(_.a)(Object($.a)().mark((function e(t){var a,c;return Object($.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,s({variables:Object(u.a)({},n)});case 5:a=e.sent,c=a.data,y(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsxs)("main",{children:[Object(P.jsx)("h4",{children:"Sign Up"}),Object(P.jsxs)("div",{children:[j?Object(P.jsxs)("p",{children:["Success! You may now head ",Object(P.jsx)(v.b,{to:"/",children:"back to the homepage."})]}):Object(P.jsxs)("form",{onSubmit:d,children:[Object(P.jsx)("label",{for:"email",children:"Email"}),Object(P.jsx)("br",{}),Object(P.jsx)("input",{placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:b}),Object(P.jsx)("br",{}),Object(P.jsx)("label",{for:"password",children:"Password"}),Object(P.jsx)("br",{}),Object(P.jsx)("input",{placeholder:"******",name:"password",type:"password",value:n.password,onChange:b}),Object(P.jsx)("br",{}),Object(P.jsx)("button",{style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(P.jsx)("div",{children:l.message})]})]})},U=function(){return Object(P.jsxs)("div",{className:"homepage",children:[Object(P.jsx)("h1",{children:"Welcome to the Highlighter Calendar App!"}),Object(P.jsx)("p",{children:"Login to your account:"}),Object(P.jsx)(q,{}),Object(P.jsx)("p",{children:"Don't have an account? Sign up:"}),Object(P.jsx)(L,{})]})},T=n(36),z=(n(180),n(145)),B=n.n(z),H=(n(181),function(){var e=Object(o.useState)(new Date),t=Object(D.a)(e,2),n=t[0],a=t[1],c=B()(n).format("MM"),r=B()(n).format("MMMM YYYY");return Object(o.useEffect)((function(){var e=setInterval((function(){return a(new Date)}),1e3);return function(){clearInterval(e)}})),Object(P.jsx)("div",{className:"row date-display p-3 text-center",children:Object(P.jsxs)("div",{className:"col",children:[c," | ",r]})})}),J=n(254),F=n(148),W=n(164),G=n.n(W),K=(n(185),n(146)),Q=n.n(K),R=(n(186),Object(Y.a)(s||(s=Object(N.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n    }\n  }\n"])))),V=(Object(Y.a)(i||(i=Object(N.a)(["\n  query getEvents {\n    events {\n      _id\n      title\n      start\n      end\n      eventAuthor\n    }\n  }\n"]))),Object(Y.a)(l||(l=Object(N.a)(["\n  query me {\n    me {\n      _id\n      email\n      events {\n        _id\n        title\n        start\n        end\n        eventAuthor\n      }\n    }\n  }\n"])))),X=Object(F.b)(G.a),Z=function(e){var t=Object(o.useState)({title:"",start:"",end:""}),n=Object(D.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)("events"),s=Object(D.a)(r,2),i=s[0],l=s[1],j=Object(E.a)(M),b=Object(D.a)(j,2),d=b[0],O=b[1].error,h=function(){var e=Object(_.a)(Object($.a)().mark((function e(t){var n;return Object($.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(a);try{n=d({variables:Object(u.a)({},a)}),n.data}catch(r){console.error(r)}l([].concat(Object(T.a)(i),[a])),c({title:"",start:"",end:""}),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Object(g.q)().email,x=Object(J.a)(m?R:V,{variables:{email:m}}),p=x.loading,v=x.data,y=(null===v||void 0===v?void 0:v.me)||(null===v||void 0===v?void 0:v.user)||{};return S()&&Object(f.a)(w()).data.email===m?Object(P.jsx)(g.a,{to:"/profile"}):p?Object(P.jsx)("div",{children:"Loading..."}):null!==y&&void 0!==y&&y.email?Object(P.jsxs)("div",{className:"Profile",children:[Object(P.jsx)(H,{}),Object(P.jsx)("h2",{className:"my-calendar",children:"My Calendar"}),Object(P.jsxs)("aside",{className:"date-picker",children:[Object(P.jsx)("div",{className:"event-title",children:"Add Your Event"}),Object(P.jsx)("input",{type:"text",placeholer:"Add Title",style:{width:"60%",margin:"20px"},value:a.title,onChange:function(e){return c(Object(u.a)(Object(u.a)({},a),{},{title:e.target.value}))}}),Object(P.jsx)(Q.a,{placeholderText:"Start Date",style:{width:"60%",margin:"20px"},selected:a.start,onChange:function(e){return c(Object(u.a)(Object(u.a)({},a),{},{start:e}))}}),Object(P.jsx)(Q.a,{placeholderText:"End Date",style:{width:"60%"},selected:a.end,onChange:function(e){return c(Object(u.a)(Object(u.a)({},a),{},{end:e}))}}),Object(P.jsx)("button",{style:{width:"60%",margin:"20px"},onClick:h,className:"button-74",children:"Add Event"}),O&&Object(P.jsx)("div",{className:"col-12 my-3 bg-danger text-white p-3",children:"Something went wrong..."})]}),Object(P.jsx)(F.a,{className:" react-calendar",localizer:X,events:y.events.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{start:new Date(e.start),end:new Date(e.end)})})),startAccessor:"start",endAccessor:"end",style:{height:500}})]}):Object(P.jsx)("h4",{children:"You need to be logged in to see this. Use the navigation links above to sign up or log in!"})},ee=Object(O.a)({uri:"/graphql"}),te=Object(p.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ne=new h.a({link:te.concat(ee),cache:new m.a});var ae=function(){return Object(P.jsx)(x.a,{client:ne,children:Object(P.jsx)(v.a,{children:Object(P.jsxs)("div",{children:[Object(P.jsxs)("ul",{children:[Object(P.jsx)("li",{children:Object(P.jsx)(v.b,{to:"/",children:"Home"})}),S()?Object(P.jsx)("li",{children:Object(P.jsx)("a",{href:"/#",onClick:k,children:"Log Out"})}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("li",{children:Object(P.jsx)(v.b,{to:"/login",children:"Login"})}),Object(P.jsx)("li",{children:Object(P.jsx)(v.b,{to:"/signup",children:"Signup"})}),Object(P.jsx)("li",{children:Object(P.jsx)(v.b,{to:"/profile",children:"Profile"})}),Object(P.jsx)(H,{})]})]}),Object(P.jsxs)(g.d,{children:[Object(P.jsx)(g.b,{path:"/",element:Object(P.jsx)(U,{})}),Object(P.jsx)(g.b,{path:"/login",element:Object(P.jsx)(q,{})}),Object(P.jsx)(g.b,{path:"/signup",element:Object(P.jsx)(L,{})}),Object(P.jsx)(g.b,{path:"/Profile",element:Object(P.jsx)(Z,{})})]})]})})})};n(232);d.a.render(Object(P.jsx)(j.a.StrictMode,{children:Object(P.jsx)(ae,{})}),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.a5d8266e.chunk.js.map